"use strict";(self["webpackChunkpvr"]=self["webpackChunkpvr"]||[]).push([[749],{6876:function(e,o,t){t.d(o,{XI:function(){return p},Y2:function(){return u},bQ:function(){return s},tw:function(){return d},yC:function(){return c}});t(4719);var n=t(872),a=t(4881),l=t(4010);let i=JSON.parse(localStorage.getItem("token")),{accessToken:r}=i;console.log(r);const s=async(e,o)=>{let t;return await(0,n.Z)(e,r,o).then((e=>{t=e})).catch((e=>{console.log(e),"Request failed with status code 401"===e.message&&(localStorage.clear(),l.Z.go("/login"))})),t},u=(e,o,t,n)=>{console.log(e,o);let l=t,i=l?.toString(),r={url:n.paginacion,options:{method:n.GET},params:{page:o,size:10,title:i,base:e.tabla,varPagina:e.varPaginacion}};a.Z.dispatch("loadList",r)},c=(e,o,t)=>{if(e){let a=e.toString();if(a!=t&&""!=e){let t=o,a={method:"GET"};return new Promise((o=>{setTimeout((()=>{(0,n.Z)(`${t}${e}`,r,a).then((e=>{let t=e.data;o(!t.length||"*  ya existe")})).catch((e=>{"Request failed with status code 401"===e.message&&(localStorage.clear(),l.Z.push("/login"))}))}),1e3)}))}}},d=async(e,o)=>await(0,n.Z)(e,r,o),p=[{id:1,tipoUsuario:"operador"},{id:2,tipoUsuario:"administrador"}]},9749:function(e,o,t){t.r(o),t.d(o,{default:function(){return d}});var n=t(9269);function a(e,o,t,a,l,i){const r=(0,n.up)("Table");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(r,{variables:a.choferes,endPoint:a.endPoint,method:a.method,col:a.columnChoferes},null,8,["variables","endPoint","method","col"])])}var l=t(3678),i=t(1825),r=t(5090),s={components:{Table:l.Z},setup(){return{choferes:i.R7,endPoint:i.SJ,method:i.UD,columnChoferes:r.cx}}},u=t(7617);const c=(0,u.Z)(s,[["render",a]]);var d=c},3678:function(e,o,t){t.d(o,{Z:function(){return W}});var n=t(9269),a=t(3201);const l={class:"q-pa-md"};function i(e,o,t,i,r,s){const u=(0,n.up)("q-icon"),c=(0,n.up)("q-input"),d=(0,n.up)("q-btn"),p=(0,n.up)("q-th"),m=(0,n.up)("q-tr"),g=(0,n.up)("q-td"),w=(0,n.up)("q-tooltip"),f=(0,n.up)("q-table");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(f,{title:"",rows:i.row,columns:i.columns,"rows-per-page-options":[3,6,9],pagination:i.pagination,"onUpdate:pagination":o[2]||(o[2]=e=>i.pagination=e),"row-key":"id",onRequest:i.handleRequest},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(c,{rounded:"",filled:"",clearable:"",borderless:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":[o[0]||(o[0]=e=>i.filter=e),i.buscar],placeholder:i.variable.filter,"bg-color":"field"},{append:(0,n.w5)((()=>[(0,n.Wm)(u,{name:"search",color:"blue"})])),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])),"top-left":(0,n.w5)((()=>[(0,n.Wm)(d,{color:"red",icon:"add",size:"sm",onClick:o[1]||(o[1]=e=>i.action(null))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(i.Agregar),1)])),_:1})])),header:(0,n.w5)((e=>[(0,n.Wm)(m,{props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{"auto-width":""}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,(o=>((0,n.wg)(),(0,n.j4)(p,{key:o.name,props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(o.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,n.w5)((e=>[(0,n.Wm)(m,{props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{"auto-width":""}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,(o=>((0,n.wg)(),(0,n.j4)(g,{key:o.name,props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(o.value),1)])),_:2},1032,["props"])))),128)),(0,n.Wm)(g,{"auto-width":""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{color:"green",icon:"search",size:"sm",onClick:o=>i.action(e.row.id,"GET",null,"Consulta",!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Consultar")])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(d,{disable:i.isAdmin,color:"red",icon:"delete",onClick:o=>i.action(e.row.id,"DELETE",` Registro Eliminado :${e.row.id}`,"Eliminar",!0),size:"sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Eliminar")])),_:1})])),_:2},1032,["disable","onClick"]),(0,n.Wm)(d,{color:"blue",icon:"edit",size:"sm",onClick:o=>i.action(e.row.id,"PUT",null,"Modificar",!1)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Modificar")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","onRequest"])])}t(4719);var r=t(6237),s=t(6876),u=t(2201),c=t(6957),d={name:"Qtable",props:["variables","endPoint","method","col"],setup(e){const o=(0,r.iH)(e.col()),t=(0,r.iH)([]),a=e.variables,l=(e.endPoint,e.method),i=1,d="",p=(0,r.iH)({page:0,rowsPerPage:10,rowsNumber:0}),m=(0,r.iH)(!0),g=(0,u.tv)(),w=(0,c.oR)(),f=(0,r.iH)("");let h="Agregar",b=null;function v(e){console.log(e),(0,s.Y2)(a,e.pagination.page,f.value,l)}function k(){(0,s.Y2)(a,p.value.page,f.value,l)}"administrador"===w.getters.isGetter("isToken").tipoUsuario&&(m.value=!1),(0,s.Y2)(a,i,d,l),(0,n.m0)((()=>{if(w.getters.isGetter("isList")){const{tu:e,currentPage:o,totalPages:n,totalItems:a}=w.getters.isGetter("isList");t.value=e,p.value.page=o,p.value.rowsPerPage=n,p.value.rowsNumber=a}}));const P=(e,o,t,n,l)=>{if(null===e)w.dispatch("resetState"),g.push(a.routeAdd);else{let i=`${a.endPointBase}${e}`;b=a.routeAdd;let r={url:i,options:{method:"GET"},msg:t,label:n,method:o,disabled:l,routeAdd:b,routePrincipal:a.routePrincipal};console.log(r),w.dispatch("action",r)}};return{columns:o,handleRequest:v,row:t,buscar:k,action:P,filter:f,variable:a,Agregar:h,isAdmin:m,pagination:p}}},p=t(7617),m=t(4025),g=t(6931),w=t(4633),f=t(9804),h=t(8231),b=t(2195),v=t(7282),k=t(4806),P=t(1410),Z=t.n(P);const T=(0,p.Z)(d,[["render",i]]);var W=T;Z()(d,"components",{QTable:m.Z,QInput:g.Z,QIcon:w.Z,QBtn:f.Z,QTr:h.Z,QTh:b.Z,QTd:v.Z,QTooltip:k.Z})}}]);
//# sourceMappingURL=749.dfe61e1a.js.map