"use strict";(self["webpackChunkpvr"]=self["webpackChunkpvr"]||[]).push([[741],{6876:function(e,o,t){t.d(o,{XI:function(){return p},Y2:function(){return u},bQ:function(){return s},tw:function(){return c},yC:function(){return d}});t(4719);var a=t(872),n=t(4881),i=t(4010);let l=JSON.parse(localStorage.getItem("token")),{accessToken:r}=l;console.log(r);const s=async(e,o)=>{let t;return await(0,a.Z)(e,r,o).then((e=>{t=e})).catch((e=>{console.log(e),"Request failed with status code 401"===e.message&&(localStorage.clear(),i.Z.go("/login"))})),t},u=(e,o,t,a)=>{console.log(e,o);let i=t,l=i?.toString(),r={url:a.paginacion,options:{method:a.GET},params:{page:o,size:10,title:l,base:e.tabla,varPagina:e.varPaginacion}};n.Z.dispatch("loadList",r)},d=(e,o,t)=>{if(e){let n=e.toString();if(n!=t&&""!=e){let t=o,n={method:"GET"};return new Promise((o=>{setTimeout((()=>{(0,a.Z)(`${t}${e}`,r,n).then((e=>{let t=e.data;o(!t.length||"*  ya existe")})).catch((e=>{"Request failed with status code 401"===e.message&&(localStorage.clear(),i.Z.push("/login"))}))}),1e3)}))}}},c=async(e,o)=>await(0,a.Z)(e,r,o),p=[{id:1,tipoUsuario:"operador"},{id:2,tipoUsuario:"administrador"}]},7741:function(e,o,t){t.r(o),t.d(o,{default:function(){return c}});var a=t(9269);function n(e,o,t,n,i,l){const r=(0,a.up)("Table");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{variables:n.averias,endPoint:n.endPoint,method:n.method,col:n.columnAverias},null,8,["variables","endPoint","method","col"])])}var i=t(3678),l=t(1825),r=t(5090),s={components:{Table:i.Z},setup(){return{averias:l.Tw,endPoint:l.SJ,method:l.UD,columnAverias:r.AE}}},u=t(7617);const d=(0,u.Z)(s,[["render",n]]);var c=d},3678:function(e,o,t){t.d(o,{Z:function(){return W}});var a=t(9269),n=t(3201);const i={class:"q-pa-md"};function l(e,o,t,l,r,s){const u=(0,a.up)("q-icon"),d=(0,a.up)("q-input"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-th"),m=(0,a.up)("q-tr"),g=(0,a.up)("q-td"),w=(0,a.up)("q-tooltip"),f=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(f,{title:"",rows:l.row,columns:l.columns,"rows-per-page-options":[3,6,9],pagination:l.pagination,"onUpdate:pagination":o[2]||(o[2]=e=>l.pagination=e),"row-key":"id",onRequest:l.handleRequest},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(d,{rounded:"",filled:"",clearable:"",borderless:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":[o[0]||(o[0]=e=>l.filter=e),l.buscar],placeholder:l.variable.filter,"bg-color":"field"},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search",color:"blue"})])),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])),"top-left":(0,a.w5)((()=>[(0,a.Wm)(c,{color:"red",icon:"add",size:"sm",onClick:o[1]||(o[1]=e=>l.action(null))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(l.Agregar),1)])),_:1})])),header:(0,a.w5)((e=>[(0,a.Wm)(m,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{"auto-width":""}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(o=>((0,a.wg)(),(0,a.j4)(p,{key:o.name,props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(o.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((e=>[(0,a.Wm)(m,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{"auto-width":""}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(o=>((0,a.wg)(),(0,a.j4)(g,{key:o.name,props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(o.value),1)])),_:2},1032,["props"])))),128)),(0,a.Wm)(g,{"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"green",icon:"search",size:"sm",onClick:o=>l.action(e.row.id,"GET",null,"Consulta",!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Consultar")])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(c,{disable:l.isAdmin,color:"red",icon:"delete",onClick:o=>l.action(e.row.id,"DELETE",` Registro Eliminado :${e.row.id}`,"Eliminar",!0),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Eliminar")])),_:1})])),_:2},1032,["disable","onClick"]),(0,a.Wm)(c,{color:"blue",icon:"edit",size:"sm",onClick:o=>l.action(e.row.id,"PUT",null,"Modificar",!1)},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Modificar")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","onRequest"])])}t(4719);var r=t(6237),s=t(6876),u=t(2201),d=t(6957),c={name:"Qtable",props:["variables","endPoint","method","col"],setup(e){const o=(0,r.iH)(e.col()),t=(0,r.iH)([]),n=e.variables,i=(e.endPoint,e.method),l=1,c="",p=(0,r.iH)({page:0,rowsPerPage:10,rowsNumber:0}),m=(0,r.iH)(!0),g=(0,u.tv)(),w=(0,d.oR)(),f=(0,r.iH)("");let h="Agregar",b=null;function v(e){console.log(e),(0,s.Y2)(n,e.pagination.page,f.value,i)}function k(){(0,s.Y2)(n,p.value.page,f.value,i)}"administrador"===w.getters.isGetter("isToken").tipoUsuario&&(m.value=!1),(0,s.Y2)(n,l,c,i),(0,a.m0)((()=>{if(w.getters.isGetter("isList")){const{tu:e,currentPage:o,totalPages:a,totalItems:n}=w.getters.isGetter("isList");t.value=e,p.value.page=o,p.value.rowsPerPage=a,p.value.rowsNumber=n}}));const P=(e,o,t,a,i)=>{if(null===e)w.dispatch("resetState"),g.push(n.routeAdd);else{let l=`${n.endPointBase}${e}`;b=n.routeAdd;let r={url:l,options:{method:"GET"},msg:t,label:a,method:o,disabled:i,routeAdd:b,routePrincipal:n.routePrincipal};console.log(r),w.dispatch("action",r)}};return{columns:o,handleRequest:v,row:t,buscar:k,action:P,filter:f,variable:n,Agregar:h,isAdmin:m,pagination:p}}},p=t(7617),m=t(4025),g=t(6931),w=t(4633),f=t(9804),h=t(8231),b=t(2195),v=t(7282),k=t(4806),P=t(1410),Z=t.n(P);const T=(0,p.Z)(c,[["render",l]]);var W=T;Z()(c,"components",{QTable:m.Z,QInput:g.Z,QIcon:w.Z,QBtn:f.Z,QTr:h.Z,QTh:b.Z,QTd:v.Z,QTooltip:k.Z})}}]);
//# sourceMappingURL=741.66f3f3e7.js.map