"use strict";(self["webpackChunkpvr"]=self["webpackChunkpvr"]||[]).push([[883],{6876:function(e,t,l){l.d(t,{XI:function(){return p},Y2:function(){return u},bQ:function(){return r},tw:function(){return c},yC:function(){return d}});l(4719);var o=l(872),a=l(4881),i=l(4010);let n=JSON.parse(localStorage.getItem("token")),{accessToken:s}=n;console.log(s);const r=async(e,t)=>{let l;return await(0,o.Z)(e,s,t).then((e=>{l=e})).catch((e=>{console.log(e),"Request failed with status code 401"===e.message&&(localStorage.clear(),i.Z.go("/login"))})),l},u=(e,t,l,o)=>{console.log(e,t);let i=l,n=i?.toString(),s={url:o.paginacion,options:{method:o.GET},params:{page:t,size:10,title:n,base:e.tabla,varPagina:e.varPaginacion}};a.Z.dispatch("loadList",s)},d=(e,t,l)=>{if(e){let a=e.toString();if(a!=l&&""!=e){let l=t,a={method:"GET"};return new Promise((t=>{setTimeout((()=>{(0,o.Z)(`${l}${e}`,s,a).then((e=>{let l=e.data;t(!l.length||"*  ya existe")})).catch((e=>{"Request failed with status code 401"===e.message&&(localStorage.clear(),i.Z.push("/login"))}))}),1e3)}))}}},c=async(e,t)=>await(0,o.Z)(e,s,t),p=[{id:1,tipoUsuario:"operador"},{id:2,tipoUsuario:"administrador"}]},6883:function(e,t,l){l.r(t),l.d(t,{default:function(){return B}});var o=l(9269),a=l(5102);const i={class:"q-pa-md"},n=(0,o._)("div",{class:"text-h6"},"Entrada de Unidades (BUSCAR*)",-1),s={class:"q-gutter-md row items-start"};function r(e,t,l,r,u,d){const c=(0,o.up)("q-tooltip"),p=(0,o.up)("q-btn"),m=(0,o.up)("q-card-section"),f=(0,o.up)("q-card"),h=(0,o.up)("q-input"),w=(0,o.up)("q-select"),g=(0,o.up)("q-card-actions"),b=(0,o.up)("Table"),v=(0,o.up)("q-form");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(v,{class:"q-gutter-md",onSubmit:(0,a.iM)(r.action,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"bg-green text-white"},{default:(0,o.w5)((()=>[n,(0,o.Wm)(p,{color:"green",icon:"arrow_back",size:"sm",to:"/"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Atras")])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(p,{color:"red",icon:"add",size:"sm",to:"/salidaAdd"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Agregar Salida ")])),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{vertical:"",align:"center"},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(h,{modelValue:r.model.fechaInicio,"onUpdate:modelValue":t[0]||(t[0]=e=>r.model.fechaInicio=e),type:"date",hint:"Fecha desde",style:{width:"150px"},rules:[r.required,e=>r.fechaMayor(e,r.model.fechaFinal)]},null,8,["modelValue","rules"]),(0,o.Wm)(h,{modelValue:r.model.fechaFinal,"onUpdate:modelValue":t[1]||(t[1]=e=>r.model.fechaFinal=e),type:"date",hint:"Fecha desde",style:{width:"150px"},rules:[r.required,e=>r.fechaMayor(r.model.fechaInicio,e)]},null,8,["modelValue","rules"]),(0,o.Wm)(w,{modelValue:r.model.status,"onUpdate:modelValue":t[2]||(t[2]=e=>r.model.status=e),hint:"Status del PVR",style:{width:"150px"},options:r.optionStatus,"option-value":"status","option-label":"label","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,o.Wm)(w,{modelValue:r.models,"onUpdate:modelValue":t[3]||(t[3]=e=>r.models=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:r.options,onFilter:r.filterFn,hint:"Indique Unidad",style:{width:"200px","padding-bottom":"32px"},rules:[r.required]},null,8,["modelValue","options","onFilter","rules"])]),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{size:"sm",label:"Consultar",color:"green",type:"submit"})])),_:1})])),_:1}),(0,o.Wm)(b,{variables:r.Entrada,endPoint:r.endPoint,method:r.method,col:r.columnPvr},null,8,["variables","endPoint","method","col"])])),_:1})])),_:1},8,["onSubmit"])])}var u=l(6237),d=l(8686),c=l(6876),p=l(3201);const m={class:"q-pa-md"};function f(e,t,l,a,i,n){const s=(0,o.up)("q-icon"),r=(0,o.up)("q-input"),u=(0,o.up)("q-th"),d=(0,o.up)("q-tr"),c=(0,o.up)("q-td"),f=(0,o.up)("q-tooltip"),h=(0,o.up)("q-btn"),w=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",m,[(0,o.Wm)(w,{title:"",rows:a.rows,columns:a.columns,filter:a.filter,"row-key":"name"},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(r,{rounded:"",filled:"",clearable:"",borderless:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>a.filter=e),placeholder:"Buscar","bg-color":"field"},{append:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"search",color:"blue"})])),_:1},8,["modelValue"])])),header:(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"auto-width":""}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.j4)(u,{key:t.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,p.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{"auto-width":""}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,p.zw)(t.value),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(c,{"auto-width":""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{disable:a.isAdmin,color:"red",icon:"delete",onClick:t=>a.eliminar(e.row.id),size:"sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Eliminar")])),_:1})])),_:2},1032,["disable","onClick"]),!0===e.row.status?((0,o.wg)(),(0,o.j4)(h,{key:0,color:"red",icon:"key",size:"sm",onClick:t=>a.action(e.row.id,"PUT",null,"Modificar",!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" CERRAR PVR")])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),!1===e.row.status?((0,o.wg)(),(0,o.j4)(h,{key:1,color:"blue",icon:"search",size:"sm",onClick:t=>a.action(e.row.id,"POST",null,"Consulta",!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" CONSULTA PVR")])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])}l(4719);var h=l(2201),w=l(6957),g={props:["variables","endPoint","col"],setup(e){const t=(0,u.iH)(e.col()),l=(0,u.iH)([]),a=e.variables,i=(0,h.tv)(),n=(0,w.oR)(),s=(0,u.iH)(!0),r=(0,u.iH)("");let d="Agregar",c=null;"administrador"===n.getters.isGetter("isToken").tipoUsuario&&(s.value=!1),console.log(a.endPointBase),n.dispatch("resetState"),(0,o.m0)((()=>{n.getters.isGetter("isList")&&(l.value=n.getters.isGetter("isList"))}));const p=e=>{console.log(e);let t={url:`/api/salidas/${e}`,options:{method:"delete"},urlRoute:"/",msg:"Registro Eliminado"};n.dispatch("conecctionApiRest",t)},m=(e,t,l,o,s)=>{if(null===e)n.dispatch("resetState"),i.push(a.routeAdd);else{let i=`${a.endPointBase}${e}`;c="Consulta"===o?a.consultaPvr:a.routeAdd;let r={url:i,options:{method:"GET"},msg:l,label:o,method:t,disabled:s,routeAdd:c,routePrincipal:a.routePrincipal};console.log(r),n.dispatch("action",r)}};return{columns:t,rows:l,action:m,filter:r,variable:a,Agregar:d,isAdmin:s,eliminar:p}}},b=l(7617),v=l(4025),q=l(6931),k=l(4633),W=l(8231),y=l(2195),Z=l(7282),_=l(9804),P=l(4806),S=l(1410),C=l.n(S);const U=(0,b.Z)(g,[["render",f]]);var Q=U;C()(g,"components",{QTable:v.Z,QInput:q.Z,QIcon:k.Z,QTr:W.Z,QTh:y.Z,QTd:Z.Z,QBtn:_.Z,QTooltip:P.Z});var T=l(1825),V=l(5090),A=l(5999),R={components:{Table:Q},setup(){const e=(0,u.iH)([]),t=(0,u.iH)([]),l=(0,w.oR)(),o=(0,u.iH)([]),a=(0,A.Z)(),i=(0,u.iH)([]),n=[{status:!1,label:"Cerrado"},{status:!0,label:"Abierto"}];let s={method:"POST"};(0,c.bQ)("/api/vehiculo/lista",s).then((e=>{e&&(o.value=e.data.map((function(e){return{value:e.id,label:`${e.unidad}`}})))}));const r=(0,u.iH)(o.value),p=async()=>{let o=(0,d.Wc)(e.value.fechaInicio,e.value.fechaFinal);if(o<=15)if(console.log(t.value),e.value.unidad=t.value.label,!1===e.value.status||!0===e.value.status){let t={};Object.assign(t,e.value);let o={url:"/api/reportes/All",options:{method:"POST",data:t}};l.dispatch("loadList",o)}else a.notify({type:"negative",message:"Debe Seleccionar Condicion del PVR"});else a.notify({type:"negative",message:"El Rango de Fecha tiene que ser Igual o Menor a 15 dias"})};return{filterFn(e,t,l){e&&t((()=>{const t=e.toLowerCase();r.value=o.value.filter((e=>e.label.indexOf(t)>-1))}))},action:p,model:e,required:d.C1,unidades:i,optionStatus:n,options:r,Entrada:T.BD,endPoint:T.SJ,method:T.UD,columnPvr:V.DA,fechaMayor:d.WY,models:t,requiredBoolean:d.fQ}}},F=l(3276),H=l(8055),I=l(9501),E=l(4333),x=l(8582);const z=(0,b.Z)(R,[["render",r]]);var B=z;C()(R,"components",{QForm:F.Z,QCard:H.Z,QCardSection:I.Z,QBtn:_.Z,QTooltip:P.Z,QCardActions:E.Z,QInput:q.Z,QSelect:x.Z})}}]);
//# sourceMappingURL=883.ce2911cd.js.map