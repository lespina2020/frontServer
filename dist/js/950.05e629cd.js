"use strict";(self["webpackChunkpvr"]=self["webpackChunkpvr"]||[]).push([[950],{6876:function(t,e,i){i.d(e,{XI:function(){return m},Y2:function(){return l},bQ:function(){return h},tw:function(){return g},yC:function(){return d}});i(4719);var s=i(872),a=i(4881),o=i(4010);let r=JSON.parse(localStorage.getItem("token")),{accessToken:n}=r;console.log(n);const h=async(t,e)=>{let i;return await(0,s.Z)(t,n,e).then((t=>{i=t})).catch((t=>{console.log(t),"Request failed with status code 401"===t.message&&(localStorage.clear(),o.Z.go("/login"))})),i},l=(t,e,i,s)=>{console.log(t,e);let o=i,r=o?.toString(),n={url:s.paginacion,options:{method:s.GET},params:{page:e,size:10,title:r,base:t.tabla,varPagina:t.varPaginacion}};a.Z.dispatch("loadList",n)},d=(t,e,i)=>{if(t){let a=t.toString();if(a!=i&&""!=t){let i=e,a={method:"GET"};return new Promise((e=>{setTimeout((()=>{(0,s.Z)(`${i}${t}`,n,a).then((t=>{let i=t.data;e(!i.length||"*  ya existe")})).catch((t=>{"Request failed with status code 401"===t.message&&(localStorage.clear(),o.Z.push("/login"))}))}),1e3)}))}}},g=async(t,e)=>await(0,s.Z)(t,n,e),m=[{id:1,tipoUsuario:"operador"},{id:2,tipoUsuario:"administrador"}]},1697:function(t,e,i){i.d(e,{Z:function(){return I}});var s=i(9269),a=i(5102);const o=t=>((0,s.dD)("data-v-47ee18ee"),t=t(),(0,s.Cn)(),t),r=o((()=>(0,s._)("p",null,"Firma:",-1)));function n(t,e,i,o,n,h){const l=(0,s.up)("vue-drawing-canvas"),d=(0,s.up)("q-btn"),g=(0,s.up)("q-card-actions");return(0,s.wg)(),(0,s.iD)(s.HY,null,[r,(0,s.Wm)(l,{ref:"VueCanvasDrawing",image:o.image,"onUpdate:image":e[0]||(e[0]=t=>o.image=t),width:200,height:150,"stroke-type":o.strokeType,"line-cap":o.lineCap,"line-join":o.lineJoin,"fill-shape":o.fillShape,eraser:o.eraser,lineWidth:o.line,color:o.color,"background-color":o.backgroundColor,"background-image":o.backgroundImage,watermark:o.watermark,"initial-image":o.initialImage,saveAs:"png",styles:{border:"solid 1px #000"},lock:o.disabled,onMousemove:e[1]||(e[1]=t=>o.getCoordinate(t)),"additional-images":o.additionalImages},null,8,["image","stroke-type","line-cap","line-join","fill-shape","eraser","lineWidth","color","background-color","background-image","watermark","initial-image","lock","additional-images"]),(0,s.Wm)(g,{vertical:"",align:"left"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{size:"sm",onClick:e[2]||(e[2]=t=>o.guardar()),color:"blue",type:"button",label:"Seleccione Firma"}),(0,s.Wm)(d,{size:"sm",onClick:e[3]||(e[3]=(0,a.iM)((e=>t.$refs.VueCanvasDrawing.reset()),["prevent"])),color:"blue",type:"button",label:"Limpiar"})])),_:1})],64)}var h=!1;var l=(0,s.aZ)({name:"VueDrawingCanvas",props:{strokeType:{type:String,validator:t=>-1!==["dash","line","square","circle","triangle","half_triangle"].indexOf(t),default:()=>"dash"},fillShape:{type:Boolean,default:()=>!1},width:{type:[String,Number],default:()=>600},height:{type:[String,Number],default:()=>400},image:{type:String,default:()=>""},eraser:{type:Boolean,default:()=>!1},color:{type:String,default:()=>"#000000"},lineWidth:{type:Number,default:()=>5},lineCap:{type:String,validator:t=>-1!==["round","square","butt"].indexOf(t),default:()=>"round"},lineJoin:{type:String,validator:t=>-1!==["miter","round","bevel"].indexOf(t),default:()=>"miter"},lock:{type:Boolean,default:()=>!1},styles:{type:[Array,String,Object]},classes:{type:[Array,String,Object]},backgroundColor:{type:String,default:()=>"#FFFFFF"},backgroundImage:{type:String,default:()=>null},watermark:{type:Object,default:()=>null},saveAs:{type:String,validator:t=>-1!==["jpeg","png"].indexOf(t),default:()=>"png"},canvasId:{type:String,default:()=>"VueDrawingCanvas"},initialImage:{type:Array,default:()=>[]},additionalImages:{type:Array,default:()=>[]},outputWidth:{type:Number},outputHeight:{type:Number}},data(){return{loadedImage:null,drawing:!1,context:null,images:[],strokes:{type:"",from:{x:0,y:0},coordinates:[],color:"",width:"",fill:!1,lineCap:"",lineJoin:""},guides:[],trash:[]}},mounted(){this.setContext(),this.$nextTick((()=>{this.drawInitialImage(),this.drawAdditionalImages()}))},watch:{backgroundImage:function(){this.loadedImage=null}},methods:{async setContext(){let t=document.querySelector("#"+this.canvasId);this.context=this.context?this.context:t.getContext("2d"),await this.setBackground()},drawInitialImage(){this.initialImage&&this.initialImage.length>0&&(this.images=[].concat(this.images,this.initialImage),this.redraw(!0))},drawAdditionalImages(){if(this.additionalImages&&this.additionalImages.length>0){let t=document.querySelector("#"+this.canvasId);this.additionalImages.forEach((e=>{this.drawWatermark(t,this.context,e)}))}},clear(){this.context.clearRect(0,0,Number(this.width),Number(this.height))},async setBackground(){this.clear(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,Number(this.width),Number(this.height)),await this.$nextTick((async()=>{await this.drawBackgroundImage()})),this.save()},async drawBackgroundImage(){if(!this.loadedImage)return new Promise((t=>{if(!this.backgroundImage)return void t();const e=new Image;e.src=this.backgroundImage,e.onload=()=>{this.context.drawImage(e,0,0,Number(this.width),Number(this.height)),this.loadedImage=e,t()}}));this.context.drawImage(this.loadedImage,0,0,Number(this.width),Number(this.height))},getCoordinates(t){let e,i;if(t.touches&&t.touches.length>0){let s=document.querySelector("#"+this.canvasId),a=s.getBoundingClientRect();e=t.touches[0].clientX-a.left,i=t.touches[0].clientY-a.top}else e=t.offsetX,i=t.offsetY;return{x:e,y:i}},startDraw(t){if(!this.lock){this.drawing=!0;let e=this.getCoordinates(t);this.strokes={type:this.eraser?"eraser":this.strokeType,from:e,coordinates:[],color:this.eraser?this.backgroundColor:this.color,width:this.lineWidth,fill:!this.eraser&&"dash"!==this.strokeType&&"line"!==this.strokeType&&this.fillShape,lineCap:this.lineCap,lineJoin:this.lineJoin},this.guides=[]}},draw(t){if(this.drawing){this.context||this.setContext();let e=this.getCoordinates(t);if(this.eraser||"dash"===this.strokeType)this.strokes.coordinates.push(e),this.drawShape(this.context,this.strokes,!1);else{switch(this.strokeType){case"line":this.guides=[{x:e.x,y:e.y}];break;case"square":this.guides=[{x:e.x,y:this.strokes.from.y},{x:e.x,y:e.y},{x:this.strokes.from.x,y:e.y},{x:this.strokes.from.x,y:this.strokes.from.y}];break;case"triangle":let t=Math.floor((e.x-this.strokes.from.x)/2)<0?-1*Math.floor((e.x-this.strokes.from.x)/2):Math.floor((e.x-this.strokes.from.x)/2),i=this.strokes.from.x<e.x?this.strokes.from.x+t:this.strokes.from.x-t;this.guides=[{x:e.x,y:this.strokes.from.y},{x:i,y:e.y},{x:this.strokes.from.x,y:this.strokes.from.y}];break;case"half_triangle":this.guides=[{x:e.x,y:this.strokes.from.y},{x:this.strokes.from.x,y:e.y},{x:this.strokes.from.x,y:this.strokes.from.y}];break;case"circle":let s=this.strokes.from.x-e.x<0?-1*(this.strokes.from.x-e.x):this.strokes.from.x-e.x;this.guides=[{x:this.strokes.from.x>e.x?this.strokes.from.x-s:this.strokes.from.x+s,y:this.strokes.from.y},{x:s,y:s}];break}this.drawGuide(!0)}}},drawGuide(t){this.redraw(!0),this.$nextTick((()=>{this.context.strokeStyle=this.color,this.context.lineWidth=1,this.context.lineJoin=this.lineJoin,this.context.lineCap=this.lineCap,this.context.beginPath(),this.context.setLineDash([15,15]),"circle"===this.strokes.type?this.context.ellipse(this.guides[0].x,this.guides[0].y,this.guides[1].x,this.guides[1].y,0,0,2*Math.PI):(this.context.moveTo(this.strokes.from.x,this.strokes.from.y),this.guides.forEach((t=>{this.context.lineTo(t.x,t.y)})),t&&this.context.closePath()),this.context.stroke()}))},drawShape(t,e,i){t.strokeStyle=e.color,t.fillStyle=e.color,t.lineWidth=e.width,t.lineJoin=void 0===e.lineJoin?this.lineJoin:e.lineJoin,t.lineCap=void 0===e.lineCap?this.lineCap:e.lineCap,t.beginPath(),t.setLineDash([]),"circle"===e.type?t.ellipse(e.coordinates[0].x,e.coordinates[0].y,e.coordinates[1].x,e.coordinates[1].y,0,0,2*Math.PI):(t.moveTo(e.from.x,e.from.y),e.coordinates.forEach((e=>{t.lineTo(e.x,e.y)})),i&&t.closePath()),e.fill?t.fill():t.stroke()},stopDraw(){this.drawing&&(this.strokes.coordinates=this.guides.length>0?this.guides:this.strokes.coordinates,this.images.push(this.strokes),this.redraw(!0),this.drawing=!1,this.trash=[])},reset(){this.lock||(this.images=[],this.strokes={type:"",coordinates:[],color:"",width:"",fill:!1,lineCap:"",lineJoin:""},this.guides=[],this.trash=[],this.redraw(!0))},undo(){if(!this.lock){let t=this.images.pop();t&&(this.trash.push(t),this.redraw(!0))}},redo(){if(!this.lock){let t=this.trash.pop();t&&(this.images.push(t),this.redraw(!0))}},async redraw(t){t="undefined"===typeof t||t,await this.setBackground().then((()=>{this.drawAdditionalImages()})).then((()=>{let t=document.createElement("canvas"),e=t.getContext("2d");t.width=Number(this.width),t.height=Number(this.height),e&&(this.images.forEach((t=>{e&&(e.globalCompositeOperation="eraser"===t.type?"destination-out":"source-over",("circle"!==t.type||"circle"===t.type&&t.coordinates.length>0)&&this.drawShape(e,t,"eraser"!==t.type&&"dash"!==t.type&&"line"!==t.type))})),this.context.drawImage(t,0,0,Number(this.width),Number(this.height)))})).then((()=>{t&&this.save()}))},wrapText(t,e,i,s,a,o){const r=/(\r\n|\n\r|\n|\r)+/g,n=/\s+/g;var h=e.split(r).filter((t=>t.length>0));for(let p=0;p<h.length;p++){for(var l=h[p].split(n).filter((t=>t.length>0)),d="",g=0;g<l.length;g++){var m=d+l[g]+" ",u=t.measureText(m),c=u.width;c>a&&g>0?(this.watermark&&this.watermark.fontStyle&&this.watermark.fontStyle.drawType&&"stroke"===this.watermark.fontStyle.drawType?t.strokeText(d,i,s):t.fillText(d,i,s),d=l[g]+" ",s+=o):d=m}this.watermark&&this.watermark.fontStyle&&this.watermark.fontStyle.drawType&&"stroke"===this.watermark.fontStyle.drawType?t.strokeText(d,i,s):t.fillText(d,i,s),s+=l.length>0?o:0}},save(){let t=document.querySelector("#"+this.canvasId);if(this.watermark){let e=document.createElement("canvas"),i=e.getContext("2d");i&&(e.width=Number(this.width),e.height=Number(this.height),i.drawImage(t,0,0,Number(this.width),Number(this.height)),this.drawWatermark(e,i,this.watermark))}else{let e=document.createElement("canvas"),i=e.getContext("2d"),s=void 0===this.outputWidth?this.width:this.outputWidth,a=void 0===this.outputHeight?this.height:this.outputHeight;if(e.width=Number(s),e.height=Number(a),i)return i.drawImage(t,0,0,Number(s),Number(a)),this.$emit("update:image",e.toDataURL("image/"+this.saveAs,1)),e.toDataURL("image/"+this.saveAs,1)}},drawWatermark(t,e,i){if("Image"===i.type){let s=i.imageStyle&&i.imageStyle.width?i.imageStyle.width:Number(this.width),a=i.imageStyle&&i.imageStyle.height?i.imageStyle.height:Number(this.height);const o=new Image;o.src=i.source,o.onload=()=>{i&&e&&e.drawImage(o,i.x,i.y,Number(s),Number(a));let r=document.createElement("canvas"),n=r.getContext("2d"),h=void 0===this.outputWidth?this.width:this.outputWidth,l=void 0===this.outputHeight?this.height:this.outputHeight;if(r.width=Number(h),r.height=Number(l),n)return n.drawImage(t,0,0,Number(h),Number(l)),this.$emit("update:image",r.toDataURL("image/"+this.saveAs,1)),r.toDataURL("image/"+this.saveAs,1)}}else if("Text"===i.type){let s=i.fontStyle&&i.fontStyle.font?i.fontStyle.font:"20px serif",a=i.fontStyle&&i.fontStyle.textAlign?i.fontStyle.textAlign:"start",o=i.fontStyle&&i.fontStyle.textBaseline?i.fontStyle.textBaseline:"alphabetic",r=i.fontStyle&&i.fontStyle.color?i.fontStyle.color:"#000000";if(e.font=s,e.textAlign=a,e.textBaseline=o,i.fontStyle&&i.fontStyle.rotate){let t,s;t=i.fontStyle&&i.fontStyle.width?i.x+Math.floor(i.fontStyle.width/2):i.x,s=i.fontStyle&&i.fontStyle.lineHeight?i.y+Math.floor(i.fontStyle.lineHeight/2):i.y,e.translate(t,s),e.rotate(i.fontStyle.rotate*Math.PI/180),e.translate(-1*t,-1*s)}i.fontStyle&&i.fontStyle.drawType&&"stroke"===i.fontStyle.drawType?(e.strokeStyle=i.fontStyle.color,i.fontStyle&&i.fontStyle.width?this.wrapText(e,i.source,i.x,i.y,i.fontStyle.width,i.fontStyle.lineHeight):e.strokeText(i.source,i.x,i.y)):(e.fillStyle=r,i.fontStyle&&i.fontStyle.width?this.wrapText(e,i.source,i.x,i.y,i.fontStyle.width,i.fontStyle.lineHeight):e.fillText(i.source,i.x,i.y));let n=document.createElement("canvas"),h=n.getContext("2d"),l=void 0===this.outputWidth?this.width:this.outputWidth,d=void 0===this.outputHeight?this.height:this.outputHeight;if(n.width=Number(l),n.height=Number(d),h)return h.drawImage(t,0,0,Number(l),Number(d)),this.$emit("update:image",n.toDataURL("image/"+this.saveAs,1)),n.toDataURL("image/"+this.saveAs,1)}},isEmpty(){return!(this.images.length>0)},getAllStrokes(){return this.images}},render(){return h?(0,s.h)("canvas",{attrs:{id:this.canvasId,width:Number(this.width),height:Number(this.height)},style:{touchAction:"none",...this.styles},class:this.classes,on:{mousedown:t=>this.startDraw(t),mousemove:t=>this.draw(t),mouseup:()=>this.stopDraw(),mouseleave:()=>this.stopDraw(),touchstart:t=>this.startDraw(t),touchmove:t=>this.draw(t),touchend:()=>this.stopDraw(),touchleave:()=>this.stopDraw(),touchcancel:()=>this.stopDraw(),pointerdown:t=>this.startDraw(t),pointermove:t=>this.draw(t),pointerup:()=>this.stopDraw(),pointerleave:()=>this.stopDraw(),pointercancel:()=>this.stopDraw()},...this.$props}):(0,s.h)("canvas",{id:this.canvasId,height:Number(this.height),width:Number(this.width),style:{touchAction:"none",...this.styles},class:this.classes,onMousedown:t=>this.startDraw(t),onMousemove:t=>this.draw(t),onMouseup:()=>this.stopDraw(),onMouseleave:()=>this.stopDraw(),onTouchstart:t=>this.startDraw(t),onTouchmove:t=>this.draw(t),onTouchend:()=>this.stopDraw(),onTouchleave:()=>this.stopDraw(),onTouchcancel:()=>this.stopDraw(),onPointerdown:t=>this.startDraw(t),onPointermove:t=>this.draw(t),onPointerup:()=>this.stopDraw(),onPointerleave:()=>this.stopDraw(),onPointercancel:()=>this.stopDraw()})}}),d=i(6237),g=i(6957);const m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAACWCAYAAACb3McZAAAAAXNSR0IArs4c6QAAA+RJREFUeF7t1bERgEAMBDHov2igACDY9ETuwPLvcF7Pd/gIEHgVOAXiZRD4FhCI10HgR0AgngcBgXgDBJqAP0hzMzUiIJCRQ1uzCQikuZkaERDIyKGt2QQE0txMjQgIZOTQ1mwCAmlupkYEBDJyaGs2AYE0N1MjAgIZObQ1m4BAmpupEQGBjBzamk1AIM3N1IiAQEYObc0mIJDmZmpEQCAjh7ZmExBIczM1IiCQkUNbswkIpLmZGhEQyMihrdkEBNLcTI0ICGTk0NZsAgJpbqZGBAQycmhrNgGBNDdTIwICGTm0NZuAQJqbqREBgYwc2ppNQCDNzdSIgEBGDm3NJiCQ5mZqREAgI4e2ZhMQSHMzNSIgkJFDW7MJCKS5mRoREMjIoa3ZBATS3EyNCAhk5NDWbAICaW6mRgQEMnJoazYBgTQ3UyMCAhk5tDWbgECam6kRAYGMHNqaTUAgzc3UiIBARg5tzSYgkOZmakRAICOHtmYTEEhzMzUiIJCRQ1uzCQikuZkaERDIyKGt2QQE0txMjQgIZOTQ1mwCAmlupkYEBDJyaGs2AYE0N1MjAgIZObQ1m4BAmpupEQGBjBzamk1AIM3N1IiAQEYObc0mIJDmZmpEQCAjh7ZmExBIczM1IiCQkUNbswkIpLmZGhEQyMihrdkEBNLcTI0ICGTk0NZsAgJpbqZGBAQycmhrNgGBNDdTIwICGTm0NZuAQJqbqREBgYwc2ppNQCDNzdSIgEBGDm3NJiCQ5mZqREAgI4e2ZhMQSHMzNSIgkJFDW7MJCKS5mRoREMjIoa3ZBATS3EyNCAhk5NDWbAICaW6mRgQEMnJoazYBgTQ3UyMCAhk5tDWbgECam6kRAYGMHNqaTUAgzc3UiIBARg5tzSYgkOZmakRAICOHtmYTEEhzMzUiIJCRQ1uzCQikuZkaERDIyKGt2QQE0txMjQgIZOTQ1mwCAmlupkYEBDJyaGs2AYE0N1MjAgIZObQ1m4BAmpupEQGBjBzamk1AIM3N1IiAQEYObc0mIJDmZmpEQCAjh7ZmExBIczM1IiCQkUNbswkIpLmZGhEQyMihrdkEBNLcTI0ICGTk0NZsAgJpbqZGBAQycmhrNgGBNDdTIwICGTm0NZuAQJqbqREBgYwc2ppNQCDNzdSIgEBGDm3NJiCQ5mZqREAgI4e2ZhMQSHMzNSIgkJFDW7MJCKS5mRoREMjIoa3ZBATS3EyNCAhk5NDWbAICaW6mRgQEMnJoazYBgTQ3UyMCAhk5tDWbgECam6kRAYGMHNqaTUAgzc3UiIBARg5tzSYgkOZmakRAICOHtmYTEEhzMzUicAOM81Zd9tdZrgAAAABJRU5ErkJggg==";var u=i(5999),c={name:"ServeDev",components:{VueDrawingCanvas:l},setup(){let t=0,e="",i="",s=0;const a=(0,d.iH)(""),o=(0,u.Z)(),r=!1,n=!1,h=(0,g.oR)(),l=!1,c=1,p=[{type:"dash",from:{x:262,y:154},coordinates:[],color:"#000000",width:1,fill:!1}],y=(0,d.iH)(null),f=e=>{let i=y.value.getCoordinates(e);t=i.x,s=i.y},w=()=>{a.value!=m?(e="firmaImg",i=a.value,h.dispatch("varMutuacion",{val:e,valor:i})):(e="firmaImg",i=null,console.log(a.value),h.dispatch("varMutuacion",{val:e,valor:i}),o.notify({type:"negative",message:"La seleccion de Firma No puede Estar Vacio"}))};return{image:a,VueCanvasDrawing:y,initialImage:p,x:t,y:s,guardar:w,getCoordinate:f,eraser:r,disabled:n,fillShape:l,line:c,color:"#000000",strokeType:"dash",lineCap:"square",lineJoin:"miter",backgroundColor:"#FFFFFF",backgroundImage:null,watermark:null,additionalImages:[]}}},p=i(7617),y=i(4333),f=i(9804),w=i(1410),k=i.n(w);const x=(0,p.Z)(c,[["render",n],["__scopeId","data-v-47ee18ee"]]);var I=x;k()(c,"components",{QCardActions:y.Z,QBtn:f.Z})},9103:function(t,e,i){i.d(e,{Z:function(){return g}});var s=i(9269);function a(t,e,i,a,o,r){const n=(0,s.up)("q-img");return(0,s.wg)(),(0,s.j4)(n,{src:`${i.url}${i.img}`,"spinner-color":"white",style:{height:"140px","max-width":"150px"}},null,8,["src"])}var o={props:["url","img"]},r=i(7617),n=i(4711),h=i(1410),l=i.n(h);const d=(0,r.Z)(o,[["render",a]]);var g=d;l()(o,"components",{QImg:n.Z})}}]);
//# sourceMappingURL=950.05e629cd.js.map