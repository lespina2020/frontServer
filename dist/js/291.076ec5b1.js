"use strict";(self["webpackChunkpvr"]=self["webpackChunkpvr"]||[]).push([[291],{6291:function(e,t,o){o.d(t,{Z:function(){return D}});o(4719);var n=o(9269),l=o(6237),i=o(3027);function r(e,t){if(t&&e===t)return null;const o=e.nodeName.toLowerCase();if(!0===["div","li","ul","ol","blockquote"].includes(o))return e;const n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,l=n.display;return"block"===l||"table"===l?e:r(e.parentNode)}function a(e,t,o){return!(!e||e===document.body)&&(!0===o&&e===t||(t===document?document.body:t).contains(e.parentNode))}function s(e,t,o){if(o||(o=document.createRange(),o.selectNode(e),o.setStart(e,0)),0===t.count)o.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(o.setEnd(e,t.count),t.count=0);else for(let n=0;0!==t.count&&n<e.childNodes.length;n++)o=s(e.childNodes[n],t,o);return o}const c=/^https?:\/\//;class u{constructor(e,t){this.el=e,this.eVm=t,this._range=null}get selection(){if(this.el){const e=document.getSelection();if(a(e.anchorNode,this.el,!0)&&a(e.focusNode,this.el,!0))return e}return null}get hasSelection(){return null!==this.selection&&0!==this.selection.toString().length}get range(){const e=this.selection;return null!==e&&e.rangeCount?e.getRangeAt(0):this._range}get parent(){const e=this.range;if(null!==e){const t=e.startContainer;return t.nodeType===document.ELEMENT_NODE?t:t.parentNode}return null}get blockParent(){const e=this.parent;return null!==e?r(e,this.el):null}save(e=this.range){null!==e&&(this._range=e)}restore(e=this._range){const t=document.createRange(),o=document.getSelection();null!==e?(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),o.removeAllRanges(),o.addRange(t)):(o.selectAllChildren(this.el),o.collapseToEnd())}savePosition(){let e,t=-1;const o=document.getSelection(),n=this.el.parentNode;if(o.focusNode&&a(o.focusNode,n)){e=o.focusNode,t=o.focusOffset;while(e&&e!==n)e!==this.el&&e.previousSibling?(e=e.previousSibling,t+=e.textContent.length):e=e.parentNode}this.savedPos=t}restorePosition(e=0){if(this.savedPos>0&&this.savedPos<e){const e=window.getSelection(),t=s(this.el,{count:this.savedPos});t&&(t.collapse(!1),e.removeAllRanges(),e.addRange(t))}}hasParent(e,t){const o=t?this.parent:this.blockParent;return null!==o&&o.nodeName.toLowerCase()===e.toLowerCase()}hasParents(e,t,o=this.parent){return null!==o&&(!0===e.includes(o.nodeName.toLowerCase())||!0===t&&this.hasParents(e,t,o.parentNode))}is(e,t){if(null===this.selection)return!1;switch(e){case"formatBlock":return"DIV"===t&&this.parent===this.el||this.hasParent(t,"PRE"===t);case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(e)===t;case"fontName":const o=document.queryCommandValue(e);return o===`"${t}"`||o===t;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const n=document.queryCommandState(e);return void 0!==t?n===t:n}}getParentAttribute(e){return null!==this.parent?this.parent.getAttribute(e):null}can(e){return"outdent"===e?this.hasParents(["blockquote","li"],!0):"indent"===e?this.hasParents(["li"],!0):"link"===e?null!==this.selection||this.is("link"):void 0}apply(e,t,o=i.ZT){if("formatBlock"===e)["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(t)&&this.is(e,t)&&(e="outdent",t=null),"PRE"===t&&this.is(e,"PRE")&&(t="P");else{if("print"===e){o();const e=window.open();return e.document.write(`\n        <!doctype html>\n        <html>\n          <head>\n            <title>Print - ${document.title}</title>\n          </head>\n          <body>\n            <div>${this.el.innerHTML}</div>\n          </body>\n        </html>\n      `),e.print(),void e.close()}if("link"===e){const e=this.getParentAttribute("href");if(null===e){const e=this.selectWord(this.selection),t=e?e.toString():"";if(!t.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=c.test(t)?t:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(e.getRangeAt(0))}else this.eVm.editLinkUrl.value=e,this.range.selectNodeContents(this.parent),this.save();return}if("fullscreen"===e)return this.eVm.toggleFullscreen(),void o();if("viewsource"===e)return this.eVm.isViewingSource.value=!1===this.eVm.isViewingSource.value,this.eVm.setContent(this.eVm.props.modelValue),void o()}document.execCommand(e,!1,t),o()}selectWord(e){if(null===e||!0!==e.isCollapsed||void 0===e.modify)return e;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const o=t.collapsed?["backward","forward"]:["forward","backward"];t.detach();const n=e.focusNode,l=e.focusOffset;return e.collapse(e.anchorNode,e.anchorOffset),e.modify("move",o[0],"character"),e.modify("move",o[1],"word"),e.extend(n,l),e.modify("extend",o[1],"character"),e.modify("extend",o[0],"word"),e}}var d=o(9804),p=o(4633),h=o(3856),m=o(64),f=(0,h.L)({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const o=(0,n.Fl)((()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter((t=>!0===e[t])).map((e=>`q-btn-group--${e}`)).join(" ");return"q-btn-group row no-wrap"+(0!==t.length?" "+t:"")+(!0===e.spread?" q-btn-group--spread":" inline")}));return()=>(0,n.h)("div",{class:o.value},(0,m.KR)(t.default))}}),g=o(6375),v=o(7396),b=o(959),y=o(1878);const w=Object.keys(v.b7),k=e=>w.reduce(((t,o)=>{const n=e[o];return void 0!==n&&(t[o]=n),t}),{});var C=(0,h.L)({name:"QBtnDropdown",props:{...v.b7,...b.D,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:r}=(0,n.FN)(),a=(0,l.iH)(e.modelValue),s=(0,l.iH)(null),c=(0,y.Z)(),u=(0,n.Fl)((()=>{const t={"aria-expanded":!0===a.value?"true":"false","aria-haspopup":"true","aria-controls":c,"aria-label":e.toggleAriaLabel||r.$q.lang.label[!0===a.value?"collapse":"expand"](e.label)};return(!0===e.disable||!1===e.split&&!0===e.disableMainBtn||!0===e.disableDropdown)&&(t["aria-disabled"]="true"),t})),h=(0,n.Fl)((()=>"q-btn-dropdown__arrow"+(!0===a.value&&!1===e.noIconAnimation?" rotate-180":"")+(!1===e.split?" q-btn-dropdown__arrow-container":""))),b=(0,n.Fl)((()=>(0,v._V)(e))),w=(0,n.Fl)((()=>k(e)));function C(e){a.value=!0,o("beforeShow",e)}function S(e){o("show",e),o("update:modelValue",!0)}function q(e){a.value=!1,o("beforeHide",e)}function T(e){o("hide",e),o("update:modelValue",!1)}function B(e){o("click",e)}function x(e){(0,i.sT)(e),H(),o("click",e)}function z(e){null!==s.value&&s.value.toggle(e)}function P(e){null!==s.value&&s.value.show(e)}function H(e){null!==s.value&&s.value.hide(e)}return(0,n.YP)((()=>e.modelValue),(e=>{null!==s.value&&s.value[e?"show":"hide"]()})),(0,n.YP)((()=>e.split),H),Object.assign(r,{show:P,hide:H,toggle:z}),(0,n.bv)((()=>{!0===e.modelValue&&P()})),()=>{const o=[(0,n.h)(p.Z,{class:h.value,name:e.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return!0!==e.disableDropdown&&o.push((0,n.h)(g.Z,{ref:s,id:c,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:C,onShow:S,onBeforeHide:q,onHide:T},t.default)),!1===e.split?(0,n.h)(d.Z,{class:"q-btn-dropdown q-btn-dropdown--simple",...w.value,...u.value,disable:!0===e.disable||!0===e.disableMainBtn,noWrap:!0,round:!1,onClick:B},{default:()=>(0,m.KR)(t.label,[]).concat(o),loading:t.loading}):(0,n.h)(f,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...b.value,glossy:e.glossy,stretch:e.stretch},(()=>[(0,n.h)(d.Z,{class:"q-btn-dropdown--current",...w.value,disable:!0===e.disable||!0===e.disableMainBtn,noWrap:!0,round:!1,onClick:x},{default:t.label,loading:t.loading}),(0,n.h)(d.Z,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...u.value,...b.value,disable:!0===e.disable||!0===e.disableDropdown,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},(()=>o))]))}}}),S=o(4806),q=o(5246),T=o(2278),B=o(6809);function x(e,t,o){t.handler?t.handler(e,o,o.caret):o.runCmd(t.cmd,t.param)}function z(e){return(0,n.h)("div",{class:"q-editor__toolbar-group"},e)}function P(e,t,o,l=!1){const i=l||"toggle"===t.type&&(t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param)),r=[];if(t.tip&&e.$q.platform.is.desktop){const e=t.key?(0,n.h)("div",[(0,n.h)("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;r.push((0,n.h)(S.Z,{delay:1e3},(()=>[(0,n.h)("div",{innerHTML:t.tip}),e])))}return(0,n.h)(d.Z,{...e.buttonProps.value,icon:null!==t.icon?t.icon:void 0,color:i?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:i&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:!!t.disable&&("function"!==typeof t.disable||t.disable(e)),size:"sm",onClick(n){o&&o(),x(n,t,e)}},(()=>r))}function H(e,t){const o="only-icons"===t.list;let l,i,r=t.label,a=null!==t.icon?t.icon:void 0;function s(){u.component.proxy.hide()}if(o)i=t.options.map((t=>{const o=void 0===t.type&&e.caret.is(t.cmd,t.param);return o&&(r=t.tip,a=null!==t.icon?t.icon:void 0),P(e,t,s,o)})),l=e.toolbarBackgroundClass.value,i=[z(i)];else{const o=void 0!==e.props.toolbarToggleColor?`text-${e.props.toolbarToggleColor}`:null,c=void 0!==e.props.toolbarTextColor?`text-${e.props.toolbarTextColor}`:null,u="no-icons"===t.list;i=t.options.map((t=>{const l=!!t.disable&&t.disable(e),i=void 0===t.type&&e.caret.is(t.cmd,t.param);i&&(r=t.tip,a=null!==t.icon?t.icon:void 0);const d=t.htmlTip;return(0,n.h)(q.Z,{active:i,activeClass:o,clickable:!0,disable:l,dense:!0,onClick(o){s(),null!==e.contentRef.value&&e.contentRef.value.focus(),e.caret.restore(),x(o,t,e)}},(()=>[!0===u?null:(0,n.h)(T.Z,{class:i?o:c,side:!0},(()=>(0,n.h)(p.Z,{name:null!==t.icon?t.icon:void 0}))),(0,n.h)(T.Z,d?()=>(0,n.h)("div",{class:"text-no-wrap",innerHTML:t.htmlTip}):t.tip?()=>(0,n.h)("div",{class:"text-no-wrap"},t.tip):void 0)]))})),l=[e.toolbarBackgroundClass.value,c]}const c=t.highlight&&r!==t.label,u=(0,n.h)(C,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:c?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:c&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:r,icon:t.fixedIcon?null!==t.icon?t.icon:void 0:a,contentClass:l,onShow:t=>e.emit("dropdownShow",t),onHide:t=>e.emit("dropdownHide",t),onBeforeShow:t=>e.emit("dropdownBeforeShow",t),onBeforeHide:t=>e.emit("dropdownBeforeHide",t)},(()=>i));return u}function L(e){if(e.caret)return e.buttons.value.filter((t=>!e.isViewingSource.value||t.find((e=>"viewsource"===e.cmd)))).map((t=>z(t.map((t=>(!e.isViewingSource.value||"viewsource"===t.cmd)&&("slot"===t.type?(0,m.KR)(e.slots[t.slot]):"dropdown"===t.type?H(e,t):P(e,t)))))))}function F(e,t,o,n={}){const l=Object.keys(n);if(0===l.length)return{};const i={default_font:{cmd:"fontName",param:e,icon:o,tip:t}};return l.forEach((e=>{const t=n[e];i[e]={cmd:"fontName",param:t,icon:o,tip:t,htmlTip:`<font face="${t}">${t}</font>`}})),i}function $(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let o=e.editLinkUrl.value;const l=()=>{e.caret.restore(),o!==e.editLinkUrl.value&&document.execCommand("createLink",!1,""===o?" ":o),e.editLinkUrl.value=null};return[(0,n.h)("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),(0,n.h)("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:e=>{(0,i.sT)(e),o=e.target.value},onKeydown:t=>{if(!0!==(0,B.Wm)(t))switch(t.keyCode){case 13:return(0,i.X$)(t),l();case 27:(0,i.X$)(t),e.caret.restore(),e.editLinkUrl.value&&"https://"!==e.editLinkUrl.value||document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),z([(0,n.h)(d.Z,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),(0,n.h)(d.Z,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:l})])]}}var V=o(6597),O=o(4848),N=o(9970);const _=Object.prototype.toString,R=Object.prototype.hasOwnProperty,E=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map((e=>"[object "+e+"]")));function j(e){if(e!==Object(e)||!0===E.has(_.call(e)))return!1;if(e.constructor&&!1===R.call(e,"constructor")&&!1===R.call(e.constructor.prototype,"isPrototypeOf"))return!1;let t;for(t in e);return void 0===t||R.call(e,t)}function A(){let e,t,o,n,l,i,r=arguments[0]||{},a=1,s=!1;const c=arguments.length;for("boolean"===typeof r&&(s=r,r=arguments[1]||{},a=2),Object(r)!==r&&"function"!==typeof r&&(r={}),c===a&&(r=this,a--);a<c;a++)if(null!==(e=arguments[a]))for(t in e)o=r[t],n=e[t],r!==n&&(!0===s&&n&&((l=Array.isArray(n))||!0===j(n))?(i=!0===l?!0===Array.isArray(o)?o:[]:!0===j(o)?o:{},r[t]=A(s,i,n)):void 0!==n&&(r[t]=n));return r}var Z=o(6146),D=(0,h.L)({name:"QEditor",props:{...V.S,...O.kM,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>0===e.length||e.every((e=>e.length)),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...O.fL,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:o,attrs:r}){const{proxy:a,vnode:s}=(0,n.FN)(),{$q:c}=a,d=(0,V.Z)(e,c),{inFullscreen:p,toggleFullscreen:h}=(0,O.ZP)(),m=(0,N.Z)(r,s),f=(0,l.iH)(null),g=(0,l.iH)(null),v=(0,l.iH)(null),b=(0,l.iH)(!1),y=(0,n.Fl)((()=>!e.readonly&&!e.disable));let w,k,C=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),w=window.getComputedStyle(document.body).fontFamily;const S=(0,n.Fl)((()=>e.toolbarBg?` bg-${e.toolbarBg}`:"")),q=(0,n.Fl)((()=>{const t=!0!==e.toolbarOutline&&!0!==e.toolbarPush;return{type:"a",flat:t,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!y.value,size:"sm"}})),T=(0,n.Fl)((()=>{const t=c.lang.editor,o=c.iconSet.editor;return{bold:{cmd:"bold",icon:o.bold,tip:t.bold,key:66},italic:{cmd:"italic",icon:o.italic,tip:t.italic,key:73},strike:{cmd:"strikeThrough",icon:o.strikethrough,tip:t.strikethrough,key:83},underline:{cmd:"underline",icon:o.underline,tip:t.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:o.unorderedList,tip:t.unorderedList},ordered:{cmd:"insertOrderedList",icon:o.orderedList,tip:t.orderedList},subscript:{cmd:"subscript",icon:o.subscript,tip:t.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:o.superscript,tip:t.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:e=>e.caret&&!e.caret.can("link"),icon:o.hyperlink,tip:t.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:o.toggleFullscreen,tip:t.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:o.viewSource,tip:t.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:o.quote,tip:t.quote,key:81},left:{cmd:"justifyLeft",icon:o.left,tip:t.left},center:{cmd:"justifyCenter",icon:o.center,tip:t.center},right:{cmd:"justifyRight",icon:o.right,tip:t.right},justify:{cmd:"justifyFull",icon:o.justify,tip:t.justify},print:{type:"no-state",cmd:"print",icon:o.print,tip:t.print,key:80},outdent:{type:"no-state",disable:e=>e.caret&&!e.caret.can("outdent"),cmd:"outdent",icon:o.outdent,tip:t.outdent},indent:{type:"no-state",disable:e=>e.caret&&!e.caret.can("indent"),cmd:"indent",icon:o.indent,tip:t.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:o.removeFormat,tip:t.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:o.hr,tip:t.hr},undo:{type:"no-state",cmd:"undo",icon:o.undo,tip:t.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:o.redo,tip:t.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:o.heading1||o.heading,tip:t.heading1,htmlTip:`<h1 class="q-ma-none">${t.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:o.heading2||o.heading,tip:t.heading2,htmlTip:`<h2 class="q-ma-none">${t.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:o.heading3||o.heading,tip:t.heading3,htmlTip:`<h3 class="q-ma-none">${t.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:o.heading4||o.heading,tip:t.heading4,htmlTip:`<h4 class="q-ma-none">${t.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:o.heading5||o.heading,tip:t.heading5,htmlTip:`<h5 class="q-ma-none">${t.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:o.heading6||o.heading,tip:t.heading6,htmlTip:`<h6 class="q-ma-none">${t.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:o.heading,tip:t.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:o.code,htmlTip:`<code>${t.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:o.size1||o.size,tip:t.size1,htmlTip:`<font size="1">${t.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:o.size2||o.size,tip:t.size2,htmlTip:`<font size="2">${t.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:o.size3||o.size,tip:t.size3,htmlTip:`<font size="3">${t.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:o.size4||o.size,tip:t.size4,htmlTip:`<font size="4">${t.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:o.size5||o.size,tip:t.size5,htmlTip:`<font size="5">${t.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:o.size6||o.size,tip:t.size6,htmlTip:`<font size="6">${t.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:o.size7||o.size,tip:t.size7,htmlTip:`<font size="7">${t.size7}</font>`}}})),x=(0,n.Fl)((()=>{const t=e.definitions||{},o=e.definitions||e.fonts?A(!0,{},T.value,t,F(w,c.lang.editor.defaultFont,c.iconSet.editor.font,e.fonts)):T.value;return e.toolbar.map((e=>e.map((e=>{if(e.options)return{type:"dropdown",icon:e.icon,label:e.label,size:"sm",dense:!0,fixedLabel:e.fixedLabel,fixedIcon:e.fixedIcon,highlight:e.highlight,list:e.list,options:e.options.map((e=>o[e]))};const n=o[e];return n?"no-state"===n.type||t[e]&&(void 0===n.cmd||T.value[n.cmd]&&"no-state"===T.value[n.cmd].type)?n:Object.assign({type:"toggle"},n):{type:"slot",slot:e}}))))})),z={$q:c,props:e,slots:t,emit:o,inFullscreen:p,toggleFullscreen:h,runCmd:G,isViewingSource:b,editLinkUrl:v,toolbarBackgroundClass:S,buttonProps:q,contentRef:g,buttons:x,setContent:J};(0,n.YP)((()=>e.modelValue),(e=>{C!==e&&(C=e,J(e,!0))})),(0,n.YP)(v,(e=>{o("link"+(e?"Show":"Hide"))}));const P=(0,n.Fl)((()=>e.toolbar&&0!==e.toolbar.length)),H=(0,n.Fl)((()=>{const e={},t=t=>{t.key&&(e[t.key]={cmd:t.cmd,param:t.param})};return x.value.forEach((e=>{e.forEach((e=>{e.options?e.options.forEach(t):t(e)}))})),e})),_=(0,n.Fl)((()=>p.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle])),R=(0,n.Fl)((()=>"q-editor q-editor--"+(!0===b.value?"source":"default")+(!0===e.disable?" disabled":"")+(!0===p.value?" fullscreen column":"")+(!0===e.square?" q-editor--square no-border-radius":"")+(!0===e.flat?" q-editor--flat":"")+(!0===e.dense?" q-editor--dense":"")+(!0===d.value?" q-editor--dark q-dark":""))),E=(0,n.Fl)((()=>[e.contentClass,"q-editor__content",{col:p.value,"overflow-auto":p.value||e.maxHeight}])),j=(0,n.Fl)((()=>!0===e.disable?{"aria-disabled":"true"}:!0===e.readonly?{"aria-readonly":"true"}:{}));function D(){if(null!==g.value){const t="inner"+(!0===b.value?"Text":"HTML"),n=g.value[t];n!==e.modelValue&&(C=n,o("update:modelValue",n))}}function M(e){if(o("keydown",e),!0!==e.ctrlKey||!0===(0,B.Wm)(e))return void ee();const t=e.keyCode,n=H.value[t];if(void 0!==n){const{cmd:t,param:o}=n;(0,i.NS)(e),G(t,o,!1)}}function U(e){ee(),o("click",e)}function I(e){if(null!==g.value){const{scrollTop:e,scrollHeight:t}=g.value;k=t-e}z.caret.save(),o("blur",e)}function K(e){(0,n.Y3)((()=>{null!==g.value&&void 0!==k&&(g.value.scrollTop=g.value.scrollHeight-k)})),o("focus",e)}function W(e){const t=f.value;if(null!==t&&!0===t.contains(e.target)&&(null===e.relatedTarget||!0!==t.contains(e.relatedTarget))){const e="inner"+(!0===b.value?"Text":"HTML");z.caret.restorePosition(g.value[e].length),ee()}}function Y(e){const t=f.value;null===t||!0!==t.contains(e.target)||null!==e.relatedTarget&&!0===t.contains(e.relatedTarget)||(z.caret.savePosition(),ee())}function Q(){k=void 0}function X(e){z.caret.save()}function J(e,t){if(null!==g.value){!0===t&&z.caret.savePosition();const o="inner"+(!0===b.value?"Text":"HTML");g.value[o]=e,!0===t&&(z.caret.restorePosition(g.value[o].length),ee())}}function G(e,t,o=!0){te(),z.caret.restore(),z.caret.apply(e,t,(()=>{te(),z.caret.save(),o&&ee()}))}function ee(){setTimeout((()=>{v.value=null,a.$forceUpdate()}),1)}function te(){(0,Z.jd)((()=>{null!==g.value&&g.value.focus({preventScroll:!0})}))}function oe(){return g.value}return(0,n.bv)((()=>{z.caret=a.caret=new u(g.value,z),J(e.modelValue),ee(),document.addEventListener("selectionchange",X)})),(0,n.Jd)((()=>{document.removeEventListener("selectionchange",X)})),Object.assign(a,{runCmd:G,refreshToolbar:ee,focus:te,getContentEl:oe}),()=>{let t;if(P.value){const e=[(0,n.h)("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+S.value},L(z))];null!==v.value&&e.push((0,n.h)("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+S.value},$(z))),t=(0,n.h)("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},e)}return(0,n.h)("div",{ref:f,class:R.value,style:{height:!0===p.value?"100%":null},...j.value,onFocusin:W,onFocusout:Y},[t,(0,n.h)("div",{ref:g,style:_.value,class:E.value,contenteditable:y.value,placeholder:e.placeholder,...m.listeners.value,onInput:D,onKeydown:M,onClick:U,onBlur:I,onFocus:K,onMousedown:Q,onTouchstartPassive:Q})])}}})},4848:function(e,t,o){o.d(t,{ZP:function(){return u},fL:function(){return c},kM:function(){return s}});var n=o(9269),l=o(6237),i=o(6114),r=o(6380);let a=0;const s={fullscreen:Boolean,noRouteFullscreenExit:Boolean},c=["update:fullscreen","fullscreen"];function u(){const e=(0,n.FN)(),{props:t,emit:o,proxy:s}=e;let c,u,d;const p=(0,l.iH)(!1);function h(){!0===p.value?f():m()}function m(){!0!==p.value&&(p.value=!0,d=s.$el.parentNode,d.replaceChild(u,s.$el),document.body.appendChild(s.$el),a++,1===a&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:f},i.Z.add(c))}function f(){!0===p.value&&(void 0!==c&&(i.Z.remove(c),c=void 0),d.replaceChild(s.$el,u),p.value=!1,a=Math.max(0,a-1),0===a&&(document.body.classList.remove("q-body--fullscreen-mixin"),void 0!==s.$el.scrollIntoView&&setTimeout((()=>{s.$el.scrollIntoView()}))))}return!0===(0,r.Rb)(e)&&(0,n.YP)((()=>s.$route.fullPath),(()=>{!0!==t.noRouteFullscreenExit&&f()})),(0,n.YP)((()=>t.fullscreen),(e=>{p.value!==e&&h()})),(0,n.YP)(p,(e=>{o("update:fullscreen",e),o("fullscreen",e)})),(0,n.wF)((()=>{u=document.createElement("span")})),(0,n.bv)((()=>{!0===t.fullscreen&&m()})),(0,n.Jd)(f),Object.assign(s,{toggleFullscreen:h,setFullscreen:m,exitFullscreen:f}),{inFullscreen:p,toggleFullscreen:h}}}}]);
//# sourceMappingURL=291.076ec5b1.js.map